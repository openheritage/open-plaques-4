<% content_for(:page_title) { t(".page_title", series: @series.name) } %>
<% content_for(:admin_menu) { navbar_link_to t("buttons.edit"), edit_series_path(@series) } %>
<% content_for(:admin_menu) { navbar_link_to t("buttons.add"), new_series_path } %>

<!-- Page Title -->
<div class="page-title">
  <div class="container d-lg-flex justify-content-between align-items-center">
    <h1 class="mb-2 mb-lg-0"><%= t(".page_title", series: @series.name) %></h1>
    <nav class="breadcrumbs">
      <ol>
        <li><%= link_to "Home", root_path %></li>
        <li><%= link_to "Series", series_index_path %></li>
        <li class="current">#<%= @series.id %></li>
      </ol>
    </nav>
  </div>
</div><!-- End Page Title -->

<section class="section">
  <div class="container" data-aos="fade-up" data-aos-delay="100">

    <p><%= markdown @series.description %></p>
    <%= render partial: "plaques/badge", object: @series.plaques_count, as: @plaques_count %>

    <% if @series.geolocated? %>
      <section id="plaque-map" data-controller="maplibre" data-maplibre-style="<%= JSON[
        @series.bbox_array ? 
        {
          bounds: @series.bbox_array,
          fitBoundsOptions: {
            padding: 50
          }
        }
        :
        { centroid: @series.center_point_array }
      ] %>" style="height: 400px; width: 100%; margin-top: 15px;">
        <template data-controller="geojson" data-url="<%= series_plaques_path(@series, format: :geojson) %>" data-map-id="plaque-map">
          when this is displayed it sends a message to the map to display popups then autodestructs
        </template>
      </section>
    <% end %>

    <%= render partial: "plaques/tabbed" %>

  </div>
</section>
