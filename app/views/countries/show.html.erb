<% content_for(:page_title) { t(".page_title", country: @country.name) } %>
<% content_for(:admin_menu) { navbar_link_to t("buttons.edit"), edit_country_path(@country) } %>
<% content_for(:admin_menu) { navbar_link_to t("buttons.add"), new_country_area_path(@country.alpha2) } %>

<!-- Page Title -->
<div class="page-title">
  <div class="container d-lg-flex justify-content-between align-items-center">
    <h1 class="mb-2 mb-lg-0"><span class="flag-icon flag-icon-<%= @country.alpha2 %>"></span>  <%= t(".page_heading", country: @country) %></h1>
    <nav class="breadcrumbs">
      <ol>
        <li><%= link_to "Home", root_path %></li>
        <li><%= link_to "Places", countries_path %></li>
        <li class="current"><%= link_to @country.name, @country %></li>
      </ol>
    </nav>
  </div>
</div><!-- End Page Title -->

<div class="container" data-aos="fade-up" data-aos-delay="100">
  <div class="row">

    <div class="col-lg-8">

      <section id="summary-category" class="summary-category section">
        <p><%= @country.description %></p>
        <p>
          <span class="badge bg-secondary"><%= pluralize_with_no(@country.plaques_count, t('activerecord.models.plaque').downcase) %></span>
          <% if controller.controller_name.eql?('countries') && controller.action_name.eql?('show') %>
            <small><%= @percentage_curated %>% have been curated</small>
          <% else %>
          <%= fa_icon(:compass) if @country.geolocated? %>
          <% end %>
        </p>
        <span class="badge bg-secondary pull-right"><%= pluralize_with_no(@subject_count, 'subject') %></span>
      </section>
      <%= render "people/top10" %>

    </div>

    <div class="col-lg-4 sidebar">
      <div class="widgets-container">

        <%= render "search" %>
        <%= render "people/diversity" %>

      </div>
    </div>
  </div>

<section id="areas-category" class="areas-category section">

  <!-- Section Title -->
  <div class="container section-title" data-aos="fade-up">
    <div class="section-title-container d-flex align-items-center justify-content-between">
      <h2>Areas</h2>
    </div>
  </div><!-- End Section Title -->

  <div class="container" data-aos="fade-up" data-aos-delay="100">

    <% @areas.sort { |a,b| a.state.to_s + a.name <=> b.state.to_s + b.name }.group_by(&:state).each do |state, areas| %>
      <% if !state.blank? %>
        <h2>Region: <%= state %></h2>
      <% end %>
      <div class="row" data-masonry='{"percentPosition": true }'>
        <%= render areas %>
      </div>
    <% end %>

  </div>

</section>
